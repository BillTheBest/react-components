define(function(a){"use strict";var b=a("react"),c=(a("drc/utils/StringUtils"),a("drc/utils/Utils"),{close:"fa fa-close"});return b.createClass({displayName:"Modal",propTypes:{closeModalCallback:b.PropTypes.func,iconClasses:b.PropTypes.object,title:b.PropTypes.string},getInitialState:function(){return this.iconClasses=_.merge(_.clone(c),this.props.iconClasses),{}},componentDidMount:function(){this.refs.content.getDOMNode().focus()},componentDidUpdate:function(){this.refs.content.getDOMNode().focus()},render:function(){return b.createElement("div",{onClick:this.backgroundClickHandler,id:"modal-container","data-clickcatcher":"true"},b.createElement("div",{ref:"content",className:"content",tabIndex:"-1",onKeyDown:this.keyDownHandler},b.createElement("div",{className:"header"},b.createElement("span",{className:"title"},this.props.title),b.createElement("span",{className:"close",onClick:this.closeModalHandler},b.createElement("span",{className:"close-text"},"esc to close")," | ",b.createElement("i",{className:this.iconClasses.close}))),b.createElement("div",{className:"body"},this.props.children)))},keyDownHandler:function(a){27===a.keyCode&&this.closeModalHandler(a)},backgroundClickHandler:function(a){a.target.getAttribute("data-clickcatcher")&&this.closeModalHandler(a)},closeModalHandler:function(a){a.stopPropagation(),"function"==typeof this.props.closeModalCallback?this.props.closeModalCallback():b.unmountComponentAtNode(this.getDOMNode().parentNode)}})});